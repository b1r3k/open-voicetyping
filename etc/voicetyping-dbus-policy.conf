<!DOCTYPE busconfig PUBLIC
 "-//freedesktop//DTD D-Bus Bus Configuration 1.0//EN"
 "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd">
<busconfig>
  <!-- Allow voicetyping service user to send messages to session bus -->
  <policy user="voicetyping">
    <allow send_destination="org.gnome.Shell"/>
    <allow send_destination="org.gnome.Shell.Extensions"/>
    <allow send_destination="org.gnome.Shell.Extensions.VoiceTyping"/>
    <allow send_destination="org.freedesktop.DBus"/>
    <allow send_destination="org.freedesktop.DBus.Introspectable"/>
    <!-- Allow voicetyping user to own its service name -->
    <allow own="com.cxlab.VoiceTyping"/>
    <allow own_prefix="com.cxlab"/>
  </policy>

  <!-- Allow GNOME shell to receive messages from voicetyping service -->
  <policy user="lukasz">
    <allow receive_sender="voicetyping"/>
    <allow receive_interface="org.gnome.Shell.Extensions.VoiceTyping"/>
  </policy>

  <!-- Allow any user to send messages to the voicetyping service -->
  <policy context="default">
    <allow send_destination="com.cxlab.VoiceTyping"/>
    <allow receive_sender="com.cxlab.VoiceTyping"/>
  </policy>
</busconfig>
